{% load static %}


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    
    <link rel="stylesheet" href="{% static 'css\whiteboard_design.css' %}">
    <script defer scr="{% static 'script\sticky_notes_wall.js' %}"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poetsen+One&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poetsen+One&family=Quicksand:wght@300..700&display=swap" rel="stylesheet">

    
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">

    <script defer src="{% static 'script\whiteboard_script.js' %}"></script>

</head>
<body>

    <div class="tool-bar">
        <div class="tool" onclick="changeTemplate('{% url 'home' %}');">
            <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 50 50">
                <g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                    <path stroke="#FFFFFF" d="M35.417 14.583v18.75a2.083 2.083 0 0 1-2.084 2.084h-25a2.083 2.083 0 0 1-2.083-2.084v-18.75A2.083 2.083 0 0 1 8.333 12.5h25"/>
                    <path stroke="#FFFFFF" d="M10.417 43.75h31.25a2.083 2.083 0 0 0 2.083-2.083V20.833"/>
                    <path stroke="#FFFFFF" d="m34.563 13.354l-5.396 5.396m12.5-8.333a4.167 4.167 0 1 0-8.334 0v0a4.167 4.167 0 1 0 8.334 0"/>
                </g>
            </svg>
            <p>Oc's Notes</p>
        </div>
            
        <div class="tool" onclick="changeTemplate('{% url 'write' %}');" >
            <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 16 16">
                <path fill="currentColor" d="M11.726 2.56a1.914 1.914 0 1 1 2.707 2.708l-2.64 2.64a2.5 2.5 0 0 1-1.06.63l-1.466.432a1 1 0 0 1-1.242-1.24l.43-1.467A2.5 2.5 0 0 1 9.087 5.2zm2 .708a.914.914 0 0 0-1.293 0l-2.64 2.639a1.5 1.5 0 0 0-.378.638l-.43 1.466l1.464-.432c.24-.071.46-.201.636-.378l2.64-2.64a.914.914 0 0 0 0-1.293M9.872 3H3.5A2.5 2.5 0 0 0 1 5.5v5A2.5 2.5 0 0 0 3.5 13h9a2.5 2.5 0 0 0 2.5-2.5V6.115l-1 1V10.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 10.5V7.272c.555-.453 1.19-.864 1.749-1.071c.31-.116.557-.153.735-.132c.157.019.265.08.35.208c.126.189.126.34.045.537c-.098.24-.3.497-.573.83l-.034.043c-.243.295-.538.655-.716 1.043c-.201.436-.275.95-.003 1.494c.42.842 1.368.932 2.115.788a4.429 4.429 0 0 0 2.186-1.158a.5.5 0 1 0-.708-.708c-.428.429-1.08.77-1.668.884c-.62.12-.924-.04-1.03-.254c-.104-.206-.093-.392.016-.628c.122-.266.342-.535.616-.87l.01-.012c.248-.302.551-.673.715-1.073c.184-.45.201-.96-.139-1.47a1.444 1.444 0 0 0-1.065-.647c-.397-.047-.814.044-1.2.187c-.469.174-.952.448-1.401.758V5.5A1.5 1.5 0 0 1 3.5 4h5.372z"/>
            </svg>
            <p>Write Notes</p>
        </div>
            
        <div class="tool" onclick="changeTemplate('{% url 'suggestion' %}');">
            <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 20 20">
                <path fill="currentColor" d="M8.5 4.498a1.5 1.5 0 1 1 3 0a1.5 1.5 0 0 1-3 0m1.5-2.5a2.5 2.5 0 0 0-2.43 3.086L5.471 4.15a1.76 1.76 0 0 0-2.317.88c-.4.882-.007 1.917.877 2.31L7 8.662v2.287l-1.877 4.645a1.75 1.75 0 0 0 3.246 1.311l.085-.213a5.5 5.5 0 0 1-.424-1.618l-.589 1.457a.75.75 0 1 1-1.39-.562l1.876-4.645A1 1 0 0 0 8 10.949V8.662a1 1 0 0 0-.593-.914L4.439 6.427a.74.74 0 0 1-.374-.983a.76.76 0 0 1 1-.38l3.918 1.744a2.5 2.5 0 0 0 2.034 0l3.918-1.744a.76.76 0 0 1 1 .38a.74.74 0 0 1-.373.983l-2.969 1.321a1 1 0 0 0-.593.914v.545a5.5 5.5 0 0 1 1-.185v-.36l2.968-1.322a1.74 1.74 0 0 0 .878-2.31a1.76 1.76 0 0 0-2.318-.88l-2.097.934q.069-.282.07-.586a2.5 2.5 0 0 0-2.5-2.5M18 14.5a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0m-4.5 1.88a.625.625 0 1 0 0 1.25a.625.625 0 0 0 0-1.25m0-4.877c-1.048 0-1.864.818-1.853 1.955a.5.5 0 1 0 1-.01c-.006-.579.36-.945.853-.945c.473 0 .854.392.854.95c0 .202-.072.315-.36.544l-.278.215c-.506.404-.716.717-.716 1.288a.5.5 0 0 0 .992.09l.011-.156c.017-.148.1-.254.346-.448l.277-.215c.513-.41.728-.732.728-1.318c0-1.104-.823-1.95-1.854-1.95"/>
            </svg>
            <p>Suggestions</p>
        </div>

    </div>

    <div class="container" id="headbar-location">
        <div class="header-bar" >
            <div class="header-left">        
                <h1 class="app_name">OC Notes</h1>
                <h4 class="current_day" id="currentDate"></h4>
            </div>
        </div>


        <div class="note-whiteboard-container">

            <div class="note-container">
                <h2>Note</h2>

                <div class="sticky-note" id="stickynote" note_color="1" 
                        nickname_color="1" nickname_font="1" content_color="1" 
                        content_font="2" emoji="ðŸ¥°" nickname="" content=""
                        >

                    <div class="note-header">
                        <p class="nickname">Makietech</p>
                        <p class="emoji">ðŸ¥°</p>
                        <span class="pin"></span>
                    </div>

                    <div class="sticky-note-content">
                        <p >
                            Sana magustuhan nyu ang ginawa namin at ilabas nyu ang tunay nyu nararamdaman na hindi kayo makikilala at makapagbibigay ng gaan sa inyung nararamdaman.
                        </p>
                    </div>
    
                </div>

                <div class="reactions">
                    <div class="react react-{{note.note_id}}" >
                        <p>ðŸ˜»</p>
                        <i id="love-num-{{note.note_id}}" note-id="{{note.note_id}}" react="1" total="{{note.loves}}">100</i>
                    </div>
                    <div class="react react-{{note.note_id}}">
                        <p>ðŸ˜¾</p>
                        <i id="angry-num-{{note.note_id}}" note-id="{{note.note_id}}" react="2" total="{{note.angries}}">100</i>
                    </div>
                    <div class="react react-{{note.note_id}}">
                        <p>ðŸ˜¿</p>
                        <i id="cry-num-{{note.note_id}}" note-id="{{note.note_id}}" react="3" total="{{note.cries}}">100</i>
                    </div>
                    <div class="react react-{{note.note_id}}">
                        <p>ðŸ™€</p>
                        <i id="wow-num-{{note.note_id}}" note-id="{{note.note_id}}" react="4" total="{{note.wows}}">100</i>
                    </div>
                </div>

                <div class="clip">
                    <p id="replies-text-{{note.note_id}}" onclick="changeTemplate('{% url 'whiteboard' note.note_id %}');">60 <br> REPLIES</p>
                    <svg fill="#B76767" height="200px" width="200px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <path d="M487.458,271.701C501.632,267.546,512,254.43,512,238.933c0-18.825-15.309-34.133-34.133-34.133H316.083l-7.808-45.662 c20.198-10.906,33.058-28.075,33.058-47.787c0-33.724-37.478-60.151-85.333-60.151c-47.846,0-85.333,26.428-85.333,60.151 c0,19.712,12.868,36.881,33.067,47.787l-7.808,45.662H34.133C15.317,204.8,0,220.109,0,238.933 c0,15.497,10.377,28.612,24.55,32.768L2.722,431.744c-0.998,7.322,1.22,14.72,6.084,20.301c4.855,5.564,11.887,8.755,19.277,8.755 h91.383c4.719,0,8.533-3.814,8.533-8.533c0-18.825,15.317-34.133,34.133-34.133c18.825,0,34.133,15.309,34.133,34.133 c0,4.719,3.823,8.533,8.533,8.533h102.4c4.719,0,8.533-3.814,8.533-8.533c0-18.825,15.317-34.133,34.133-34.133 c18.825,0,34.133,15.309,34.133,34.133c0,4.719,3.823,8.533,8.533,8.533h91.383c7.398,0,14.43-3.191,19.285-8.764 c4.864-5.581,7.083-12.971,6.084-20.292L487.458,271.701z M213.24,204.8l6.639-38.827c10.931,3.516,23.117,5.53,36.122,5.53 c13.005,0,25.199-2.014,36.13-5.53l6.639,38.827H213.24z"></path> </g> </g> </g></svg>
                </div>

                
                <h2 class="label-reply">Relpy</h2>
                
                <div class="name-input">
                    <label for="nickname">Nickname :</label>
                    <input type="text" id="nickname" oninput="updateNickname()" maxlength="13" placeholder="13 letters only" required/>
                </div>
                <div class="content-input">
                    <label for="content">Content :</label>
                    <textarea id="content" rows="4" cols="50" oninput="updateContent()" maxlength="240" placeholder="240 letters only can be put inside"></textarea>
                </div>

                <div class="preview-buttons">
                    <div onclick="saveUserNotes()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 32 32">
                            <path fill="currentColor" d="M15 3c-1.258 0-2.152.89-2.594 2H5v23h8v2h14V14h-2V5h-7.406C17.152 3.89 16.258 3 15 3zm0 2c.555 0 1 .445 1 1v1h3v2h-8V7h3V6c0-.555.445-1 1-1zM7 7h2v4h12V7h2v7H13v12H7zm8 9h10v12H15z"/>
                        </svg>
                        <p>Paste It!</p>
                    </div>
                    <div onclick="clearAll()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 48 48">
                            <g fill="none" stroke="currentColor">
                                <path stroke-linejoin="round" stroke-width="4.302" d="M44.782 24.17L31.918 7.1L14.135 20.5L27.5 37l3.356-2.336L44.782 24.17Z"/>
                                <path stroke-linejoin="round" stroke-width="4.302" d="m27.5 37l-3.839 3.075l-10.563-.001l-2.6-3.45l-6.433-8.536L14.5 20.225"/>
                                <path stroke-linecap="round" stroke-width="4.5" d="M13.206 40.072h31.36"/>
                            </g>
                        </svg>
                        <p>Rewrite!</p>
                    </div>
                </div>

            </div>

            <div class="whiteboard-container">
                <div class="whiteboard">
                    <h2>White Board</h2>

                    <div class="replies-container">

                        
                        {% for reply in note.replies %}
                            <div class="reply">
                                
                            </div>
                        {% endfor %}
                            

                    </div>

                </div>
            </div>

        </div>


    </div>

    <script>
        
        function fetchStickyNotes(direction ) {
            var csrftoken = '{{ csrf_token }}';
        
            const startId = getStartId(direction);
        
            $.ajax({
                type: 'POST',
                url: '/stickynotes/',
                headers: { 'X-CSRFToken': csrftoken },
                data: {
                    'direction': direction,
                    'start_id': startId
                },
                success: function(response) {
                    
                    if (response.sticky_notes) {
                        var notesList = $('.sticky-notes-container');
                        configuringPageButton(response.isDatabaseHasData, direction);
        
                        if (response.sticky_notes.length > 0){
                            notesList.empty(); // Clear current list
                            response.sticky_notes.forEach( note => displayNote(note , notesList) );
                            updatePageNumberAndMove(direction);
                        }
                    }
                },
                error: function(xhr, status, error) {
                    console.error('Error fetching sticky notes:', error);
                }
            });
        }
        document.addEventListener('DOMContentLoaded', function() {
            homePrePageLoad();
        });
    
    </script>

</body>
</html>