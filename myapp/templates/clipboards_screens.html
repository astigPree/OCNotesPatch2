{% load static %}


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" href="{% static 'note_icon.svg' %}">
    <title>OC Notes </title>
    
    <link rel="stylesheet" href="{% static 'css\clipboard_screens_design.css' %}">
    <link rel="stylesheet" href="{% static 'css\toolbar_design.css' %}">
    <link rel="stylesheet" href="{% static 'css\stickynote_design.css' %}">


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poetsen+One&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poetsen+One&family=Quicksand:wght@300..700&display=swap" rel="stylesheet">

    
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">

    <script defer src="{% static 'script\home_script.js' %}"></script>

</head>
<body>

    <div class="tool-bar">
        <div class="tool" onclick="changeTemplate('{% url 'home' %}')">
            <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 50 50">
                <g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                    <path stroke="#FFFFFF" d="M35.417 14.583v18.75a2.083 2.083 0 0 1-2.084 2.084h-25a2.083 2.083 0 0 1-2.083-2.084v-18.75A2.083 2.083 0 0 1 8.333 12.5h25"/>
                    <path stroke="#FFFFFF" d="M10.417 43.75h31.25a2.083 2.083 0 0 0 2.083-2.083V20.833"/>
                    <path stroke="#FFFFFF" d="m34.563 13.354l-5.396 5.396m12.5-8.333a4.167 4.167 0 1 0-8.334 0v0a4.167 4.167 0 1 0 8.334 0"/>
                </g>
            </svg>
            <p>Oc's Notes</p>
        </div>
            
        <div class="tool" onclick="changeTemplate('{% url 'write' %}');" >
            <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 16 16">
                <path fill="currentColor" d="M11.726 2.56a1.914 1.914 0 1 1 2.707 2.708l-2.64 2.64a2.5 2.5 0 0 1-1.06.63l-1.466.432a1 1 0 0 1-1.242-1.24l.43-1.467A2.5 2.5 0 0 1 9.087 5.2zm2 .708a.914.914 0 0 0-1.293 0l-2.64 2.639a1.5 1.5 0 0 0-.378.638l-.43 1.466l1.464-.432c.24-.071.46-.201.636-.378l2.64-2.64a.914.914 0 0 0 0-1.293M9.872 3H3.5A2.5 2.5 0 0 0 1 5.5v5A2.5 2.5 0 0 0 3.5 13h9a2.5 2.5 0 0 0 2.5-2.5V6.115l-1 1V10.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 10.5V7.272c.555-.453 1.19-.864 1.749-1.071c.31-.116.557-.153.735-.132c.157.019.265.08.35.208c.126.189.126.34.045.537c-.098.24-.3.497-.573.83l-.034.043c-.243.295-.538.655-.716 1.043c-.201.436-.275.95-.003 1.494c.42.842 1.368.932 2.115.788a4.429 4.429 0 0 0 2.186-1.158a.5.5 0 1 0-.708-.708c-.428.429-1.08.77-1.668.884c-.62.12-.924-.04-1.03-.254c-.104-.206-.093-.392.016-.628c.122-.266.342-.535.616-.87l.01-.012c.248-.302.551-.673.715-1.073c.184-.45.201-.96-.139-1.47a1.444 1.444 0 0 0-1.065-.647c-.397-.047-.814.044-1.2.187c-.469.174-.952.448-1.401.758V5.5A1.5 1.5 0 0 1 3.5 4h5.372z"/>
            </svg>
            <p>Write Notes</p>
        </div>
            
        <div class="tool" onclick="changeTemplate('{% url 'suggestion' %}');" >
            <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 20 20">
                <path fill="currentColor" d="M8.5 4.498a1.5 1.5 0 1 1 3 0a1.5 1.5 0 0 1-3 0m1.5-2.5a2.5 2.5 0 0 0-2.43 3.086L5.471 4.15a1.76 1.76 0 0 0-2.317.88c-.4.882-.007 1.917.877 2.31L7 8.662v2.287l-1.877 4.645a1.75 1.75 0 0 0 3.246 1.311l.085-.213a5.5 5.5 0 0 1-.424-1.618l-.589 1.457a.75.75 0 1 1-1.39-.562l1.876-4.645A1 1 0 0 0 8 10.949V8.662a1 1 0 0 0-.593-.914L4.439 6.427a.74.74 0 0 1-.374-.983a.76.76 0 0 1 1-.38l3.918 1.744a2.5 2.5 0 0 0 2.034 0l3.918-1.744a.76.76 0 0 1 1 .38a.74.74 0 0 1-.373.983l-2.969 1.321a1 1 0 0 0-.593.914v.545a5.5 5.5 0 0 1 1-.185v-.36l2.968-1.322a1.74 1.74 0 0 0 .878-2.31a1.76 1.76 0 0 0-2.318-.88l-2.097.934q.069-.282.07-.586a2.5 2.5 0 0 0-2.5-2.5M18 14.5a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0m-4.5 1.88a.625.625 0 1 0 0 1.25a.625.625 0 0 0 0-1.25m0-4.877c-1.048 0-1.864.818-1.853 1.955a.5.5 0 1 0 1-.01c-.006-.579.36-.945.853-.945c.473 0 .854.392.854.95c0 .202-.072.315-.36.544l-.278.215c-.506.404-.716.717-.716 1.288a.5.5 0 0 0 .992.09l.011-.156c.017-.148.1-.254.346-.448l.277-.215c.513-.41.728-.732.728-1.318c0-1.104-.823-1.95-1.854-1.95"/>
            </svg>
            <p>Suggestions</p>
        </div>

    </div>

    <div class="container" id="headbar-location">
        <div class="header-bar" >
            <div class="header-left" onclick="changeTemplate('{% url 'home' %}');">        
                <h1 class="app_name">OC Notes</h1>
                <h4 class="current_day" id="currentDate"></h4>
            </div>
            <div class="header-right">
                <div class="number-page"><h1 id="page-number"> 1 </h1></div>
                <p class="text-page">page</p>
            </div>
        </div>

        <div class="view-leaderboards">

            <div class="emojies-leaderboard">
                <p>ðŸ˜»</p>
                <p>ðŸ˜¾</p>
                <p>ðŸ˜¿</p>
                <p>ðŸ™€</p>
            </div>

            <div class="leaderboard-text" onclick="changeTemplate('{% url 'reactionboards' %}')">
                Most React
            </div>
        </div>

        <script>
            const noteColor = {
                "1" : "#f9f485",
                "2" : "#F3BCCF",
                "3" : "#A1FF6C",
                "4" : "#DCCAFF",
                "5" : "#87CDFF",
                "6" : "#F37750",
            }
            const FontNames = {
                "1" :'--primary-font',
                "2" : '--secondary-font',
                "3" : '--comic-san',
                "4" : '--arial-rounded',
                "5" : '--lucida-writing',
                "6" : '--bradley-hand',
                "7" : '--chalkboard-se',
                "8" : '--dakota',
                "9" : '--permanent-marker',
                "10" : '--indie-flower'
            }
            const textColor = {
                '1' : "black",
                '2' : 'red',
                '3' : 'blue'
            }

            function abbreviateNumber(number) {
                if (number >= 1e8) {
                    return (number / 1e9).toFixed(1) + 'B';
                } else if (number >= 1e5) {
                    return (number / 1e6).toFixed(1) + 'M';
                } else if (number >= 1e3) {
                    return (number / 1e3).toFixed(1) + 'k';
                } else {
                    return Math.floor(number).toString();
                }
            }

            function configuringPageButton(hasPrev, hasNext, prevRemaining, nextRemaining ){
                // Removing a function on the buttons in next page and previus page
                
                const prev_text = document.getElementById("prev-remaining");
                prev_text.textContent = `${abbreviateNumber(parseInt(prevRemaining))} Read`;
                const next_text = document.getElementById("next-remaining");
                next_text.textContent = `${abbreviateNumber(parseInt(nextRemaining))} Left`;
                

                if (hasPrev == "1"){
                    const prevPageBut = document.getElementById('prev-page-button');
                    if (!prevPageBut.onclick){
                        prevPageBut.setAttribute('onclick' , "fetchStickyNotes('down')");
                        prevPageBut.style.opacity = 1;
                        nextPageBut.style.cursor = "pointer";
                    }
                } else {
                    const prevPageBut = document.getElementById('prev-page-button');
                    if (prevPageBut.onclick){
                        prevPageBut.onclick = null;
                        prevPageBut.style.opacity = 0;
                        prevPageBut.style.cursor = "none"
                    }
                }
            
                if (hasNext == "1"){
                    const nextPageBut = document.getElementById('next-page-button');
                    if (!nextPageBut.onclick){
                        nextPageBut.setAttribute('onclick' , "fetchStickyNotes('up')");
                        nextPageBut.style.opacity = 1;
                        nextPageBut.style.cursor = "pointer";
                    }
                } else {
                    const nextPageBut = document.getElementById('next-page-button');
                    if (nextPageBut.onclick){
                        nextPageBut.onclick = null;
                        nextPageBut.style.opacity = 0;
                        nextPageBut.style.cursor = "none";
                    }
                }
            
            }

            function genderIcon(gender, iconColor){
                console.log(gender);
                if (gender == "1"){
                    return `<svg id="gender-icon" fill="${iconColor}" viewBox="-25.6 -25.6 307.20 307.20" id="Flat" xmlns="http://www.w3.org/2000/svg" stroke="#791717" transform="rotate(0)"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="1.536"></g><g id="SVGRepo_iconCarrier"> <path d="M227.9978,39.95557q-.00219-.56984-.05749-1.13819c-.018-.18408-.05237-.36279-.07849-.54443-.02979-.20557-.05371-.41211-.09424-.61621-.04029-.20362-.09607-.40088-.14649-.60059-.04541-.18017-.08484-.36084-.13867-.53906-.05884-.19434-.13159-.38135-.19971-.57129-.06445-.17969-.12353-.36084-.19677-.5376-.07349-.17724-.15967-.34668-.24109-.51953-.08582-.18213-.16687-.36621-.26257-.54492-.088-.16455-.18824-.32031-.2837-.48047-.10534-.17627-.2052-.355-.32031-.52685-.11572-.17334-.24475-.33545-.369-.502-.11-.14746-.21252-.29834-.3302-.4414-.23462-.28614-.4834-.55957-.74316-.82227-.01782-.01807-.03247-.03809-.05054-.05615-.01953-.01953-.041-.03565-.06067-.05469-.26123-.25781-.53271-.50537-.81653-.73828-.14794-.12158-.30383-.22754-.45605-.34082-.16138-.12061-.31885-.24561-.48645-.35791-.17725-.11865-.36108-.22168-.54309-.33008-.15442-.0918-.30518-.189-.46411-.27392-.18311-.09815-.37134-.18116-.55811-.269-.16846-.07959-.334-.16357-.50659-.23486-.18042-.0752-.36475-.13525-.54785-.20068-.18652-.0669-.37073-.13868-.56152-.19629-.18189-.05518-.3667-.09571-.55066-.14161-.19568-.04931-.389-.10449-.58851-.144-.20935-.041-.42077-.06592-.63171-.09619-.17688-.02539-.351-.05908-.53027-.07666q-.56837-.05567-1.13953-.05762c-.01465,0-.02893-.002-.0437-.002H168a12,12,0,0,0,0,24h19.02905l-32.7334,32.7334a83.9988,83.9988,0,1,0,16.971,16.97021L204,68.9707V88a12,12,0,0,0,24,0V40C228,39.98486,227.9978,39.97021,227.9978,39.95557ZM146.42627,194.42676a59.97169,59.97169,0,1,1,0-84.85352A60.06666,60.06666,0,0,1,146.42627,194.42676Z"></path> </g></svg>`
                }
                if (gender == "2"){
                    return `<svg id="gender-icon" fill="${iconColor}" viewBox="0 0 256 256" id="Flat" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M212,96a84,84,0,1,0-96,83.12891V196H88a12,12,0,0,0,0,24h28v20a12,12,0,0,0,24,0V220h28a12,12,0,0,0,0-24H140V179.12891A84.119,84.119,0,0,0,212,96ZM68,96a60,60,0,1,1,60,60A60.06812,60.06812,0,0,1,68,96Z"></path> </g></svg>`
                }
                return `<svg id="gender-icon" fill="${iconColor}" viewBox="0 0 256 256" id="Flat" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M219.9978,23.95557q-.00219-.56984-.05749-1.13819c-.018-.18408-.05237-.36279-.07849-.54443-.02979-.20557-.05371-.41211-.09424-.61621-.04029-.20362-.09607-.40088-.14649-.60059-.04541-.18017-.08484-.36084-.13867-.53906-.05884-.19434-.13159-.38135-.19971-.57129-.06445-.17969-.12353-.36084-.19677-.5376-.07349-.17724-.15967-.34668-.24109-.51953-.08582-.18213-.16687-.36621-.26257-.54492-.088-.16455-.18824-.32031-.2837-.48047-.10534-.17627-.2052-.355-.32031-.52685-.11572-.17334-.24475-.33545-.369-.502-.11-.14746-.21252-.29834-.3302-.4414-.23462-.28614-.4834-.55957-.74316-.82227-.01782-.01807-.03247-.03809-.05054-.05615-.01831-.01856-.03857-.0332-.05688-.05127q-.39441-.38966-.82227-.74317c-.13965-.11474-.28686-.21435-.43042-.32177-.16992-.127-.33606-.25879-.51269-.377-.16883-.11328-.34424-.21093-.51734-.31445-.16333-.09765-.32324-.20019-.49145-.29-.1731-.09277-.3512-.1709-.52759-.25439-.17871-.08448-.35462-.17383-.538-.24951-.16932-.07032-.34229-.12647-.514-.18848-.19751-.07129-.39307-.14649-.59534-.208-.16882-.05078-.34045-.08789-.51086-.13135-.20874-.05322-.41529-.11132-.62818-.15332-.19055-.03759-.383-.05957-.57507-.08789-.19544-.02881-.38831-.06494-.58679-.08447-.33252-.03271-.666-.04541-.99988-.05078C208.11853,12.0083,208.0603,12,208,12H172a12,12,0,0,0,0,24h7.0293l-15.051,15.05127A71.97526,71.97526,0,1,0,108,178.981V192H88a12,12,0,0,0,0,24h20v16a12,12,0,0,0,24,0V216h20a12,12,0,0,0,0-24H132V178.981A71.928,71.928,0,0,0,180.27783,68.69287L196,52.9707V60a12,12,0,0,0,24,0V24C220,23.98486,219.9978,23.97021,219.9978,23.95557ZM120,156a48,48,0,1,1,48-48A48.05468,48.05468,0,0,1,120,156Z"></path> </g></svg>`
            }


            function onetimeChange(
                note_id, note_color, nickname_font, nickname_color, content_font, content_color , gender
            ){
                const sticky_note = document.getElementById(`sticky-note-${note_id}`);
                sticky_note.style.backgroundColor = noteColor[note_color];

                const selected_font = getComputedStyle(document.documentElement).getPropertyValue(FontNames[nickname_font]);
                const sticky_nickname = document.getElementById(`nickname-${note_id}`);
                sticky_nickname.style.fontFamily = selected_font;
                sticky_nickname.style.color = textColor[nickname_color];
                
                const selected_content_font = getComputedStyle(document.documentElement).getPropertyValue(FontNames[content_font]);
                const sticky_content = document.getElementById(`content-${note_id}`);
                sticky_content.style.fontFamily = selected_content_font;
                sticky_content.style.color = textColor[content_color];

                const reacts = document.getElementsByClassName(`react-${note_id}`);
                Array.from(reacts).forEach( react => {
                    react.style.backgroundColor = noteColor[note_color];
                });

                const note_time = document.getElementById(`note-date-${note_id}`);
                note_time.style.backgroundColor = noteColor[note_color];

                const reply_text = document.getElementById(`replies-text-${note_id}`);
                reply_text.style.color = noteColor[note_color];
                reply_text.textContent = `R; ${abbreviateNumber(parseInt(reply_text.getAttribute("replies")))}`;

                const love_emoji = document.getElementById(`love-num-${note_id}`);
                love_emoji.innerHTML = abbreviateNumber(parseInt(love_emoji.getAttribute("total")));

                const angry_emoji = document.getElementById(`angry-num-${note_id}`);
                angry_emoji.innerHTML = abbreviateNumber(parseInt(angry_emoji.getAttribute("total")));

                const cry_emoji = document.getElementById(`cry-num-${note_id}`);
                cry_emoji.innerHTML = abbreviateNumber(parseInt(cry_emoji.getAttribute("total")));

                const wows_emoji = document.getElementById(`wow-num-${note_id}`);
                wows_emoji.innerHTML = abbreviateNumber(parseInt(wows_emoji.getAttribute("total")));

                const pin = document.getElementById(`pin-${note_id}`);
                pin.innerHTML = genderIcon(gender, noteColor[note_color]);

            }

            function clickReact(react){
                react.classList.add('react-clicked');
                react.onclick = null;
                
                const reactNum = react.querySelector('i');
                reactNum.innerHTML = abbreviateNumber(parseInt(reactNum.getAttribute("total"), 10 ) + 1);
                const note_id = reactNum.getAttribute("note-id");
                const react_selected = reactNum.getAttribute("react");
                
                var csrftoken = '{{ csrf_token }}';
            
                $.ajax({
                    type: 'POST',
                    url: '/reacted/',
                    headers: { 'X-CSRFToken': csrftoken },
                    data: {
                        'note_id': note_id,
                        'react': react_selected
                    },
                    success: function(response) {
                        
                    },
                    error: function(xhr, status, error) {
                        console.error('Error fetching sticky notes:', error);
                    }
                });
            }

        </script>


        {% comment %} Division for the main content  {% endcomment %}
        <div class="sticky-notes-container">

            {% for note in notes %}
                <div>

                    <div class="clip">
                        <p id="replies-text-{{note.note_id}}" onclick="changeTemplate('{% url 'whiteboard' note.note_id %}');"
                            replies="{{note.total_replies}}">R; 200m</p>
                        <svg fill="#B76767" height="200px" width="200px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <path d="M487.458,271.701C501.632,267.546,512,254.43,512,238.933c0-18.825-15.309-34.133-34.133-34.133H316.083l-7.808-45.662 c20.198-10.906,33.058-28.075,33.058-47.787c0-33.724-37.478-60.151-85.333-60.151c-47.846,0-85.333,26.428-85.333,60.151 c0,19.712,12.868,36.881,33.067,47.787l-7.808,45.662H34.133C15.317,204.8,0,220.109,0,238.933 c0,15.497,10.377,28.612,24.55,32.768L2.722,431.744c-0.998,7.322,1.22,14.72,6.084,20.301c4.855,5.564,11.887,8.755,19.277,8.755 h91.383c4.719,0,8.533-3.814,8.533-8.533c0-18.825,15.317-34.133,34.133-34.133c18.825,0,34.133,15.309,34.133,34.133 c0,4.719,3.823,8.533,8.533,8.533h102.4c4.719,0,8.533-3.814,8.533-8.533c0-18.825,15.317-34.133,34.133-34.133 c18.825,0,34.133,15.309,34.133,34.133c0,4.719,3.823,8.533,8.533,8.533h91.383c7.398,0,14.43-3.191,19.285-8.764 c4.864-5.581,7.083-12.971,6.084-20.292L487.458,271.701z M213.24,204.8l6.639-38.827c10.931,3.516,23.117,5.53,36.122,5.53 c13.005,0,25.199-2.014,36.13-5.53l6.639,38.827H213.24z"></path> </g> </g> </g></svg>
                    </div>

                    <div class="sticky-note"id="sticky-note-{{note.note_id}}" note_id="{{ note.note_id }}">

                        <div class="note-header">
                            <p class="nickname" id="nickname-{{note.note_id}}" >{{ note.nickname }}</p>
                            <p class="emoji">{{ note.emoji }}</p>
                            <span class="pin" id="pin-{{note.note_id}}"></span>
                        </div>

                        <div class="sticky-note-content">
                            <p id="content-{{note.note_id}}">{{ note.content }}</p>
                        </div>

                    </div>



                    <div class="reactions">
                        <div class="react react-{{note.note_id}}" onclick="clickReact(this)" >
                            <p>ðŸ˜»</p>
                            <i id="love-num-{{note.note_id}}" note-id="{{note.note_id}}" react="1" total="{{note.loves}}"></i>
                        </div>
                        <div class="react react-{{note.note_id}}"  onclick="clickReact(this)">
                            <p>ðŸ˜¾</p>
                            <i id="angry-num-{{note.note_id}}" note-id="{{note.note_id}}" react="2" total="{{note.angries}}"></i>
                        </div>
                        <div class="react react-{{note.note_id}}" onclick="clickReact(this)">
                            <p>ðŸ˜¿</p>
                            <i id="cry-num-{{note.note_id}}" note-id="{{note.note_id}}" react="3" total="{{note.cries}}"></i>
                        </div>
                        <div class="react react-{{note.note_id}}" onclick="clickReact(this)">
                            <p>ðŸ™€</p>
                            <i id="wow-num-{{note.note_id}}" note-id="{{note.note_id}}" react="4" total="{{note.wows}}"></i>
                        </div>
                    </div>

                    <div class="note-date" id="note-date-{{note.note_id}}">
                        {{note.time}}
                    </div>

                </div>

            

                <script>
                    onetimeChange(
                        {{note.note_id}}, {{note.note_color}}, {{note.nickname_font}}, 
                        {{note.nickname_color}}, {{note.content_font}}, {{note.content_color}},
                        {{note.gender}}
                    );
                </script>
                
            {% endfor %}
                

        </div>

        <div class="paging-buttons">
            <div class="page-button" id="prev-page-button" style="opacity: 0;">
                <svg fill="#ffffff" height="200px" width="200px" version="1.2" baseProfile="tiny" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-63 65 128 128" xml:space="preserve" stroke="#ffffff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M-11.9,66c7.1,0,13,5.8,13,12.9s-5.8,13-12.9,13c-7.1,0-13-5.8-13-12.9S-19.1,66-11.9,66z M48.2,93.4l-16-12.1l-1.9,6.2 l-9.4-3.1l-10.6,32.2l-17.7,0.2l-14.8-24.9c-1.1-2-3.2-3.1-5.8-3c-0.4,0-2.4,0.5-2.7,0.6c-10.9,3.6-19.5,20.8-19.4,38.5 c-0.1,5.3,0,9.9,0.4,14.1c-0.4,5.1,2.6,10.2,7.7,12c1.3,0.5,2.6,0.7,4,0.7h32.2l0.1,30.3c0,4.2,3.3,7.4,7.4,7.4 c4.2,0,7.4-3.3,7.4-7.4l-0.1-37.8c0-1.9-0.7-3.9-2.3-5.1c-1.4-1.4-3.3-2.3-5.1-2.3h-21.7v-16.2l-11.3-19.1c-0.5-0.7-0.1-1.8,0.5-2.3 c0.7-0.5,1.8-0.1,2.3,0.5l12.9,22.2c1,1.7,2.7,2.9,4.9,2.9h22.2c2.4,0,4.5-1.5,5.2-3.7l19.4,6.3l0.7,0.2l0.1-0.2l12.1-37.1 L48.2,93.4z M35.1,128.2l-18.3-5.9c0-2.6-2-4.9-4.4-5.5l9.7-29.7L46.1,95L35.1,128.2z M-61.7,165l0-6.8l52.7,0.1l0,6.8L-61.7,165z"></path> </g></svg>
                <p id="prev-remaining">0 read</p>
            </div>
            <div class="page-button" onclick="changeTemplate('#headbar-location')">
                <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 72 72">
                    <path fill="#ffffff" d="m52.501 10.564l-10.328 7.859v13.453h4.78v-9.231l5.583-4.311l5.597 4.311v9.231h4.781V18.435l-10.413-7.871z"/>
                    <g fill="#ffffff">
                        <path d="M25.267 39.441v2.214l4.16 5.124a6.622 6.622 0 0 1 .756 2.705l.406 9.151c.086 1.78-.824 2.72-1.736 2.72c-.97 0-1.72-.912-1.884-2.631l-1.053-8.66L19 44.172a3.216 3.216 0 0 1-1.113-2.366a5.417 5.417 0 0 1 .765-2.581l3.293-5.947c1.141-2.281 2.256-3.091 3.762-3.091a2.714 2.714 0 0 1 2.68 2.767Zm-9.152 6.549l-2.229 3.37l-6.331 3.07a1.42 1.42 0 0 0-.836 1.742a1.236 1.236 0 0 0 1.602.818l6.035-1.85a5.372 5.372 0 0 0 2.187-1.392l3.287-3.328Z"/>
                        <circle cx="31.383" cy="26.116" r="3.266"/>
                    </g>
                    <g fill="none" stroke="#ffffff" stroke-linecap="round" stroke-width="2">
                        <path stroke-miterlimit="10" d="M46.327 15.263v-4.175"/>
                        <path stroke-linejoin="round" d="M42.173 31.546V18.423m20.741.012v13.111M40.193 19.839l12.308-9.275l12.393 9.275"/>
                        <path stroke-linejoin="round" d="M46.954 31.216v-8.571l5.582-4.311l5.597 4.311v8.571m-22.899 8.356h-5.298l-4.647-5.332m-.246-3.996s-5.785 1.354-7.088 2.287c-1.664 1.192-5.674 7.162-5.674 7.162m3.834 6.297l-2.229 3.37l-6.331 3.07a1.42 1.42 0 0 0-.836 1.742a1.236 1.236 0 0 0 1.602.818l6.035-1.85a5.372 5.372 0 0 0 2.187-1.392l5.112-5.175"/>
                        <path stroke-linejoin="round" d="M25.267 39.441v2.214l4.16 5.124a6.622 6.622 0 0 1 .756 2.705l.406 9.151c.086 1.78-.824 2.72-1.736 2.72c-.97 0-1.72-.912-1.884-2.631l-1.053-8.66L19 44.172a3.216 3.216 0 0 1-1.113-2.366a5.417 5.417 0 0 1 .765-2.581l3.293-5.947c1.141-2.281 2.256-3.091 3.762-3.091a2.714 2.714 0 0 1 2.68 2.767m-.27-6.838a3.266 3.266 0 1 1 3.266 3.266"/>
                    </g>
                </svg>
                <p>Go Top</p>
            </div>
            <div class="page-button" onclick="fetchStickyNotes('up')" id="next-page-button">
                <svg fill="#ffffff" height="200px" width="200px" version="1.2" baseProfile="tiny" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-63 65 128 128" xml:space="preserve" stroke="#ffffff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M-11.9,66c7.1,0,13,5.8,13,12.9s-5.8,13-12.9,13c-7.1,0-13-5.8-13-12.9S-19.1,66-11.9,66z M48.2,93.4l-16-12.1l-1.9,6.2 l-9.4-3.1l-10.6,32.2l-17.7,0.2l-14.8-24.9c-1.1-2-3.2-3.1-5.8-3c-0.4,0-2.4,0.5-2.7,0.6c-10.9,3.6-19.5,20.8-19.4,38.5 c-0.1,5.3,0,9.9,0.4,14.1c-0.4,5.1,2.6,10.2,7.7,12c1.3,0.5,2.6,0.7,4,0.7h32.2l0.1,30.3c0,4.2,3.3,7.4,7.4,7.4 c4.2,0,7.4-3.3,7.4-7.4l-0.1-37.8c0-1.9-0.7-3.9-2.3-5.1c-1.4-1.4-3.3-2.3-5.1-2.3h-21.7v-16.2l-11.3-19.1c-0.5-0.7-0.1-1.8,0.5-2.3 c0.7-0.5,1.8-0.1,2.3,0.5l12.9,22.2c1,1.7,2.7,2.9,4.9,2.9h22.2c2.4,0,4.5-1.5,5.2-3.7l19.4,6.3l0.7,0.2l0.1-0.2l12.1-37.1 L48.2,93.4z M35.1,128.2l-18.3-5.9c0-2.6-2-4.9-4.4-5.5l9.7-29.7L46.1,95L35.1,128.2z M-61.7,165l0-6.8l52.7,0.1l0,6.8L-61.7,165z"></path> </g></svg>
                <p id = "next-remaining">200 left</p>
            </div>

        </div>

        <script>
            configuringPageButton({{hasPrev}}, {{hasNext}} , {{prevRemaining}} , {{nextRemaining}});
        </script>
        

    </div>

    <script>
        
        function fetchStickyNotes(direction ) {
            var csrftoken = '{{ csrf_token }}';
        
            const startId = getStartId(direction);
        
            $.ajax({
                type: 'POST',
                url: '/stickynotes/',
                headers: { 'X-CSRFToken': csrftoken },
                data: {
                    'direction': direction,
                    'start_id': startId
                },
                success: function(response) {
                    
                    if (response.sticky_notes) {
                        configuringPageButton(response.hasPrev, response.hasNext);
        
                        if (response.sticky_notes.length > 0){
                            var notesList = $('.sticky-notes-container');
                            notesList.empty(); // Clear current list
                            
                            response.sticky_notes.forEach( note => displayNote(note , notesList , `/whiteboard/${note.note_id}` ));
                            updatePageNumberAndMove(direction);
                        }
                    }
                },
                error: function(xhr, status, error) {
                    console.error('Error fetching sticky notes:', error);
                }
            });
        }
        document.addEventListener('DOMContentLoaded', function() {
            homePrePageLoad();
        });
    
    </script>

</body>
</html>